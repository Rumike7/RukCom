<section class="content">

  <!-- Default box -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-title">Order Lists</h3>

      <div class="card-tools">
        <button type="button" class="btn btn-tool" data-card-widget="collapse" data-toggle="tooltip" title="Collapse">
          <i class="fas fa-minus"></i></button>
        <button type="button" class="btn btn-tool" data-card-widget="remove" data-toggle="tooltip" title="Remove">
          <i class="fas fa-times"></i></button>
      </div>
    </div>
    <div class="card-body p-0">
      <table class="table table-striped projects">
          <thead>
              <tr>
                  <th style="width: 1%">
                      ID
                  </th>
                  <th style="width: 10%">
                      Price
                  </th>
                  <th style="width: 25%">
                      Products
                  </th>
                  <th style="width: 8%">
                      Shipping Method
                  </th>
                  <th style="width: 8%" class="text-center">
                      Status
                  </th>
                  <th style="width: 8%" class="text-center">
                      Paid
                  </th>
                  <th>
                      Rating
                  </th>
                  <th style="width: 5%">

                  </th>
              </tr>
          </thead>
          <tbody>
              <tr *ngFor="let order of orders">
                  <td>
                    <a routerLink="/default/orders/{{order.id}}" routerLinkActive="active" ariaCurrentWhenActive="page">
                      {{order.id}}
                    </a>
                  </td>
                  <td>
                    <a routerLink="/default/orders/{{order.id}}" routerLinkActive="active" ariaCurrentWhenActive="page">
                      <div class="text-center">
                        {{order.total_amount | currency:'MAD':'symbol-narrow':'.0-0':'fr'}}
                      </div>
                    </a>
                  </td>
                  <td>
                    <ul class="list-inline">
                      <li class="list-inline-item" *ngFor="let item of order.items">
                        <figure class="itemside me-12">
                          <a routerLink="/default/products/{{item.product.id}}" routerLinkActive="active" ariaCurrentWhenActive="page"><img src="/api/{{item.product.imgpath}}" class="img-sm img-thumbnail"></a>
                        </figure>
                      </li>

                    </ul>
                  </td>
                  <td class="project_progress">
                    <a routerLink="/default/orders/{{order.id}}" routerLinkActive="active" ariaCurrentWhenActive="page">
                      {{order.shipping_method}}
                    </a>
                  </td>
                  <td>
                    <a class="badge badge-success" routerLink="/default/orders/{{order.id}}" routerLinkActive="active" ariaCurrentWhenActive="page">
                      {{order.status}}
                    </a>
                  </td>
                  <td>
                    <a routerLink="/default/orders/{{order.id}}" routerLinkActive="active" ariaCurrentWhenActive="page">
                      <span class="badge badge-secondary" *ngIf="order.paid">Paid</span>
                      <span class="badge badge-info" *ngIf="!order.paid">Not yet</span>
                    </a>
                  </td>
                  <td>
                    <a (click)="selectOrder(order)" data-toggle="modal" data-target="#RatingModal" class="nav-link">
                      <span *ngIf="!order.rating" class="text-center">Please click to rate</span>
                      <span *ngIf="order.rating">
                        <span class="star filled-gold" *ngFor="let star of [1, 2, 3, 4, 5]">
                          <i class="fa-star"[ngClass]="{ 'fa': star <= order.rating ,'far':star > order.rating}"></i>
                        </span>
                      </span>
                    </a>
                  </td>
                  <td>
                    <div class="btn-group">
                      <button (click)="delete(order.id)" type="button" class="btn btn-default btn-sm"><i class="fas fa-trash"></i></button>
                    </div>
                  </td>
              </tr>
          </tbody>
      </table>
    </div>
    <!-- /.card-body -->
  </div>
  <!-- /.card -->

</section>

<div class="modal fade" id="RatingModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Your 
          Opinion</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <app-rating></app-rating>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>
